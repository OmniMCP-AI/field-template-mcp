{
   "tool_name": "extract_items_by_entity",
   "operation_type": "extraction",
   "description": "Extracts specific metric or property values for a given entity from unstructured text using advanced LLM semantic understanding. Ideal for extracting financial metrics (EPS, revenue, price targets), entity properties, or time-specific data from documents, reports, articles, or any text content. Returns extracted values as a list of strings.",
   "category": "extraction",
   "version": "1.0.0",
   "model_config": {
     "provider": "openai",
     "model": "openai/gpt-4o-mini",
     "temperature": 0.0,
     "max_tokens": 1000
   },
   "prompt_templates": {
     "system": "You are a data extraction expert specializing in extracting specific metrics and properties for entities from unstructured text.\n\nRules:\n- Extract ONLY the values of the requested properties/metrics for the specified entity\n- Return ONLY the extracted values as a JSON array of strings, nothing else\n- Do NOT include the field names or entity name in the output\n- If a date/time period is specified, extract the value for that specific period only\n- If a property/metric is not found for the entity, use null for that value\n- Be accurate and precise in extraction\n- Handle variations in entity naming (e.g., 'Apple' vs 'AAPL')\n- The order of values in the output array must match the order of requested properties\n\nExample:\nEntity: AAPL\nProperties: EPS, Price Targets - High\nDate: 2024 Q2\nText: Apple (AAPL) reported Q2 2024 EPS of $1.52, beating estimates. Analysts set price targets from $180 to $220.\nExtracted values: [\"$1.52\", \"$220\"]",
     "user": "Entity: {entity_to_extract}\n\nProperties/Metrics to extract: {items_to_extract}\n\n{date}Text:\n{input}\n\nExtracted values:"
   },
   "parameters": {
     "input": {
       "type": "string",
       "description": "Text content to extract data from. Supports any unstructured text including financial reports, news articles, analyst reports, documents, or web content.",
       "required": true
     },
     "entity_to_extract": {
       "type": "string",
       "description": "The entity identifier to extract the metric from (e.g., stock symbol 'AAPL', 'TSLA', company name, product name, or any identifiable entity).",
       "required": true
     },
     "items_to_extract": {
       "type": "string",
       "description": "Comma-separated list or single property/metric name to extract for the entity (e.g., 'EPS,revenue' or 'Price Targets - High'). You can also pass a JSON array of strings.",
       "required": true
     },
     "date": {
       "type": "string",
       "description": "Optional time period or date to filter the extraction (e.g., '2025-Q3', '2024 Q2', '2025-01', '2025-01-12'). If provided, only extract values for this specific period.",
       "required": false
     },
     "args": {
       "type": "object",
       "description": "Optional advanced configuration settings to customize extraction behavior, model parameters, and processing options.",
       "properties": {
         "model": {"type": "string", "description": "Override the default LLM model (gpt-4o-mini). Use more advanced models for complex extractions, technical documents, or domain-specific content requiring deeper reasoning."},
         "temperature": {"type": "number", "description": "Control randomness in extraction (0.0 = deterministic, higher = more interpretive). Default 0.0 recommended for factual data extraction to ensure consistency."},
         "max_tokens": {"type": "integer", "description": "Maximum tokens for LLM response. Increase for large extracted values or complex text content. Default is 1000 tokens."},
         "prompt": {"type": "string", "description": "Custom instructions to guide extraction behavior. Use this to clarify field meanings, specify formats (e.g., 'dates in ISO 8601'), handle edge cases, or provide domain context. Example: 'Extract monetary amounts in USD only' or 'For percentages, include the % symbol'."}
       },
       "required": false
     }
   },
   "output_format": {
     "type": "array",
     "items": {
       "type": "string"
     },
     "description": "Returns {result: [\"value1\", \"value2\", ...]} - array of extracted metric/property values as strings"
   },
   "examples": [
     {
       "description": "Extract EPS for AAPL",
       "input": {
         "input": "Apple (AAPL) reported strong Q3 results with EPS of $1.52, while Tesla (TSLA) posted EPS of $0.85. AAPL price targets range from $180 (low) to $220 (high).",
         "entity_to_extract": "AAPL",
         "items_to_extract": "EPS"
       },
       "output": ["$1.52"]
     },
     {
       "description": "Extract multiple metrics for AAPL",
       "input": {
         "input": "Apple (AAPL) reported strong Q3 results with EPS of $1.52, while Tesla (TSLA) posted EPS of $0.85. AAPL price targets range from $180 (low) to $220 (high).",
         "entity_to_extract": "AAPL",
         "items_to_extract": "EPS,Price Targets - High"
       },
       "output": ["$1.52", "$220"]
     },
     {
       "description": "Extract revenue impact for TSLA",
       "input": {
         "input": "Tesla's new model launch is expected to have a revenue impact of $2.5B in 2025, with Q3 specifically contributing $800M. Analysts estimate TSLA's total 2025 revenue at $95B.",
         "entity_to_extract": "TSLA",
         "items_to_extract": "Revenue Impact"
       },
       "output": ["$2.5B"]
     },
     {
       "description": "Extract revenue impact for TSLA with specific date",
       "input": {
         "input": "Tesla's new model launch is expected to have a revenue impact of $2.5B in 2025, with Q3 specifically contributing $800M. Analysts estimate TSLA's total 2025 revenue at $95B.",
         "entity_to_extract": "TSLA",
         "items_to_extract": "Revenue Impact",
         "date": "2025-Q3"
       },
       "output": ["$800M"]
     },
     {
       "description": "Extract multiple metrics for TSLA",
       "input": {
         "input": "Tesla's new model launch is expected to have a revenue impact of $2.5B in 2025, with Q3 specifically contributing $800M. Analysts estimate TSLA's total 2025 revenue at $95B.",
         "entity_to_extract": "TSLA",
         "items_to_extract": "Revenue Impact,Analyst Estimates - Revenue"
       },
       "output": ["$2.5B", "$95B"]
     }
   ]
 }
